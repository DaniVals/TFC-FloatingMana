<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

	<title>Tu colleccion</title>
	
	{% include "root.html.twig" %}
	<link rel="stylesheet" href=" {{ asset('styles/cardList.css') }} ">
	<script src=" {{asset('js/CardClass.js')}} "></script>
	<script src=" {{asset('js/cardList.js')}} "></script>
</head>
{% include "header.html.twig" %}
<body>
    <!-- Por cada carta, mostrar su nombre, precio y la imagen. -->
    <!-- Leer el dato que se envia desde el controlador y mostrarlo en la vista. -->
    <div class="container">
        <div class="row">
            <div class="col-12 text-center">
				<h1 class="fw-bold"> Tu colleccion </h1>
            </div>
        </div>

		{% include "separation.twig" %}

        <div class="row">
            <div class="col-12 text-center">
			 	{# <button onclick="addToBody()">mostrar lista</button> #}
				<select id="sortMode" class="form-select w-auto d-inline-block" onchange="sortBy('sortMode')">
					{# <option value="id">No ordenar</option> #}
					<option value="name">Nombre</option>
					<option value="price">Precio</option>
					<option value="purchace-price">Precio de compra</option>
				</select>
				<select id="groupMode" class="form-select w-auto d-inline-block" onchange="groupBy('groupMode')">
			 		<option value="none">No agrupar</option>
			 		<option value="type">Tipo</option>
			 		<option value="set">Expansion</option>
			 	</select>
            </div>
        </div>

		<br>
		
        <div class="row justify-content-center no-deco" id="card-list" data-ajax-route="https://api.scryfall.com/cards/">
            {% for card in collection %}
				{# {{ dump(card) }} #}
                <div class="col-12 col-sm-11 col-md-10 ps-0    card-list-show" 
				data-card-id="{{ card.getCard.getIdScryfall }}" data-card-name="{{ card.getCard.getCardName }}"
				data-card-purchase-price="{{ card.getPurchasePrice }}" data-card-is-foil="{{ card.getIsFoil }}"
				data-card-state="{{ card.getState.getStateName }}">
					<a href=" {{ path('view_card', {id: card.getCard.getIdScryfall  }) }} "> 
					<div class="d-flex justify-content-between align-items-center w-100">
						<img id="card-image" class="col-4 col-md-2 col-sm-3" src="https://fepfi.es/wp-content/uploads/2021/10/placeholder-1.png" alt="card image">
						
						<p class="col-4 col-sm-6" title="{{ card.getCard.getCardName }}"> 
							{% if card.getIsFoil %} <span title="Foil" class="foil-text">Foil</span>
							{% endif %} {{ card.getCard.getCardName }} 
						</p>

						<div id="card-prices" class="col-2 col-sm-1 d-flex flex-row align-items-start" data-price-improvement="0">
							<div class="d-flex flex-column align-items-center justify-content-center">
								<span class="d-block" id="card-price"></span>
								<span class="d-block" id="card-purcharse-price"> {{ card.getPurchasePrice }}€ </span>
							</div>
							{# <img src="https://www.svgrepo.com/show/384726/pointer-up.svg" alt="" class="w-100 h-auto"> #}
						</div>

						<div id="card-state" class="col-3 col-sm-2 d-flex flex-column align-items-start" data-price-improvement="0">
							<p class="card-state card-state-{{ card.getState.getStateName }}">{{ card.getState.getStateName }}</p>
						</div>
					</div>
					</a>
                </div>
            {% endfor %}
        </div>
		{# dejar un pequeño pie de pagina #}
		<br> 
    </div>
		{# {{ dump(collection) }} #}
		{# {{ dump(app.user) }} #}
</body>
</html>
